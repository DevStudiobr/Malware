import requests
from bs4 import BeautifulSoup

def verificar_url(url):
    try:
        # Fazendo requisição para o site
        resposta = requests.get(url)
        # Verificando se o site foi acessado com sucesso
        if resposta.status_code == 200:
            print(f"Acessando: {url}")
            # Analisando o conteúdo HTML
            soup = BeautifulSoup(resposta.content, 'html.parser')
            
            # Verificando se há links externos suspeitos
            links_suspeitos = []
            for link in soup.find_all('a', href=True):
                if "http" in link['href'] and "siteconfiavel.com" not in link['href']:  # Exemplo de site confiável
                    links_suspeitos.append(link['href'])

            # Verificando scripts suspeitos
            scripts_suspeitos = []
            for script in soup.find_all('script', src=True):
                if "malicioso" in script['src'] or "tracking" in script['src']:  # Verifica scripts com palavras suspeitas
                    scripts_suspeitos.append(script['src'])

            # Exibindo os resultados
            if links_suspeitos:
                print("\nLinks suspeitos encontrados:")
                for link in links_suspeitos:
                    print(link)
            else:
                print("Nenhum link suspeito encontrado.")

            if scripts_suspeitos:
                print("\nScripts suspeitos encontrados:")
                for script in scripts_suspeitos:
                    print(script)
            else:
                print("Nenhum script suspeito encontrado.")
        else:
            print(f"Erro ao acessar o site. Status code: {resposta.status_code}")
    except Exception as e:
        print(f"Erro ao verificar URL: {e}")

if __name__ == "__main__":
    url = input("Digite a URL do site para verificar: ")
    if not url.startswith("http"):
        url = "http://" + url  # Adiciona "http" se o usuário não inserir
    verificar_url(url)
